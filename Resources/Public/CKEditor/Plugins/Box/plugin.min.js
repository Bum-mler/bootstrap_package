"use strict";!function(){function t(e){var t=e.getSelection(),r=t&&t.getRanges()[0];if(r){for(var n,o,a,l,s=t.createBookmarks(!1)[0],i=s.startNode,u=s.endNode||i,g=r.createIterator(),d=e.editable(),c=null,f=[];c=g.getNextParagraph();)f.push(c);e.getCommand("bootstrappackage_box").state==CKEDITOR.TRISTATE_OFF?(n=e,a=function(e,t){var r=null,n=null,o=[];for(;0<t.length;){for(n=t.shift();!n.getParent().equals(e);)n=n.getParent();n.equals(r)||(o.push(n),r=n)}return o}(function(e){for(var t=e[0].getParent(),r=null,n=0;n<e.length;n++)r=e[n],t=t.getCommonAncestor(r.getParent());var o={table:1,tbody:1,tr:1,ol:1,ul:1};for(;o[t.getName()];)t=t.getParent();return t}(o=f),o),l=function(e,t){var r=null,n=[];for(;0<t.length;)if("div"==(r=t.shift()).getName()){for(var o=new CKEDITOR.dom.documentFragment(e.document);r.getFirst();)o.append(r.getFirst().remove()),n.push(o.getLast());o.replace(r)}else n.push(r);return n}(n,a),function(e,t){var r=e.document.createElement("div"),n=null;for(r.addClass("well"),r.insertBefore(t[0]);0<t.length;)n=t.shift(),r.append(n)}(n,l)):function(e){for(var t=null,r=e.length-1;0<=r;r--)m(t=e[r])&&t.remove()}(function(e){for(var t={},r=[],n=[],o=null,a=null,l=0;l<e.length;l++){o=e[l];var a=null,s=null;if("div"==o.getName()&&m(o))r.push(o);else{for(;o.getParent();){if("div"==o.getParent().getName()){a=o.getParent(),s=o;break}o=o.getParent()}a&&s&&!s.getCustomData("move")&&(n.push(s),CKEDITOR.dom.element.setMarker(t,s,"move",!0))}}for(CKEDITOR.dom.element.clearAllMarkers(t);0<n.length;)o=n.shift(),a=o.getParent(),o.getPrevious()?o.getNext()?(o.breakParent(o.getParent()),r.push(o.getNext())):o.remove().insertAfter(a):o.remove().insertBefore(a),a.getCustomData("processed")||(r.push(a),CKEDITOR.dom.element.setMarker(t,a,"processed",!0));return CKEDITOR.dom.element.clearAllMarkers(t),r}(f)),d.contains(i)&&d.contains(u)&&t.selectBookmarks([s]),e.focus()}}function r(e,t){var r=t.block||t.blockLimit;this.setState(e.elementPath(r).contains("div",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}function m(e){for(var t,r=0,n=e.getChildCount();r<n&&(t=e.getChild(r));r++)if(t.type==CKEDITOR.NODE_ELEMENT&&t.isBlockBoundary())return!1;return!0}CKEDITOR.plugins.add("bootstrappackage_box",{lang:"en,de",icons:"box",hidpi:!0,init:function(e){e.blockless||(e.addCommand("bootstrappackage_box",{exec:t,refresh:r,context:"div",allowedContent:"div",requiredContent:"div"}),e.ui.addButton&&e.ui.addButton("Box",{label:e.lang.bootstrappackage_box.toolbar,command:"bootstrappackage_box",toolbar:"blocks"}))}})}();